(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),s=a.n(c);a(14),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(1),o=a.n(l),i=a(4),u=a(3),m=a(2);function d(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var f=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://127.0.0.1:8000/api/".concat(a),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoint,n="http://127.0.0.1:8000/api/".concat(a),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoint,n=t.payload,r="http://127.0.0.1:8000/api/".concat(a),c=d("csrftoken"),s={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":c},body:JSON.stringify(n)},e.next=6,fetch(r,s);case 6:return l=e.sent,e.next=9,l.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,c,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoint,n=t.payload,r="http://127.0.0.1:8000/api/".concat(a),c=d("csrftoken"),s={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":c},body:JSON.stringify(n)},e.next=6,fetch(r,s);case 6:return l=e.sent,e.next=9,l.json();case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.handleTweetCreate,a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],l=c[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===s.trim().length?alert("Tweet cannot be blank"):t(s),l("")},className:"mb-4"},r.a.createElement("div",{className:"tweet-create-div"},r.a.createElement("textarea",{className:"form-control input-custom",rows:"3",value:s,onChange:function(e){return l(e.target.value)},placeholder:"Say something...",maxLength:255}),r.a.createElement("span",null,r.a.createElement("small",null,255-s.length))),r.a.createElement("input",{className:"btn-custom",type:"submit",value:"Tweet"}))},b=function(e){var t=e.tweet,a=e.requestUserId,n=e.handleLike,c="text-secondary";t.liked_by.includes(parseInt(a,10))&&(c="text-highlight");return r.a.createElement("div",{className:"card card-custom"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-subtitle mb-2"},t.author.username),r.a.createElement("div",{className:"clickable mb-1",onClick:function(e){e.preventDefault(),window.location.href="/".concat(t.id)}},r.a.createElement("p",{className:"card-text py-2 px-1"},t.content)),r.a.createElement("span",{className:"".concat(c," mr-2")},"".concat(t.liked_by.length)),r.a.createElement("span",{className:"".concat(c," h5 mr-2 clickable"),onClick:function(){return n(t.id)}},r.a.createElement("i",{className:"fa fa-thumbs-up"})),r.a.createElement("small",{className:"float-right"},t.timestamp)))},g=function(e){var t=e.tweetList,a=e.refetch,n=e.requestUserId,c=Object(m.a)(p,{onSuccess:a}),s=Object(u.a)(c,1)[0],l=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="tweets/".concat(t,"/like/"),e.prev=1,e.next=4,s({endpoint:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("tweet like error");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),d=t.map((function(e){return r.a.createElement(b,{key:e.id,tweet:e,handleLike:l,requestUserId:n})}));return r.a.createElement("div",{className:""},d)},N=function(e){var t=e.requestUserId,a=e.tweetId,n=Object(m.b)(["tweetItem","tweets/".concat(a,"/")],f),c=n.data,s=n.refetch,l=n.status,d=Object(m.a)(p,{onSuccess:s}),E=Object(u.a)(d,1)[0],v=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="tweets/".concat(t,"/like/"),e.prev=1,e.next=4,E({endpoint:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("tweet like error");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();if("loading"===l)return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading"));if("error"===l)return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again"));if("success"===l){if("not found"===c.error_message)return r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found"));var h="text-secondary";return c.liked_by.includes(parseInt(t,10))&&(h="text-highlight"),r.a.createElement("div",{className:"card mb-4 card-custom"},r.a.createElement("div",{className:"card-header px-3 py-1 clickable bg-custom-dark",onClick:function(){return e=c.author.username,void(window.location.href="/".concat(e));var e}},r.a.createElement("h5",null,c.author.username)),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},c.content),r.a.createElement("span",{className:"".concat(h," mr-2")},"".concat(c.liked_by.length)),r.a.createElement("span",{className:"".concat(h," h5 mr-2 clickable"),onClick:function(){return v(c.id)}},r.a.createElement("i",{className:"fa fa-thumbs-up"})),r.a.createElement("small",{className:"float-right"},c.timestamp)))}},w=function(e){var t=e.handleProfileSidebarLink,a=e.userProfile,n=e.requestUserId,c=e.userProfileRefetch,s=Object(m.a)(p,{onSuccess:function(){c()}}),l=Object(u.a)(s,1)[0],d=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="accounts/".concat(t,"/follow/"),e.next=3,l({endpoint:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f="bg-btn-follow",E="Follow",v=!1;a.user.id===parseInt(n,10)?(f="d-none",v=!0):a.followers.includes(parseInt(n,10))&&(f="bg-btn-unfollow",E="Unfollow");return r.a.createElement("div",{className:"profile card-custom"},r.a.createElement("div",{className:"profile-header"},r.a.createElement("h4",{className:"mb-1"},"".concat(a.user.first_name," ").concat(a.user.last_name)),r.a.createElement("h6",{className:"mb-2"},"@".concat(a.user.username)),r.a.createElement("div",null,r.a.createElement("button",{className:"".concat(f," btn-custom"),onClick:function(){return d(a.user.username)}},"".concat(E))),r.a.createElement("p",{className:"profile-bio"},"".concat(a.bio))),r.a.createElement("div",{className:"profile-links"},r.a.createElement("ul",null,v&&r.a.createElement("li",{id:"profile-update",className:"clickable",onClick:function(){return t("update")}},"Profile"),r.a.createElement("li",{id:"profile-tweets",className:"active clickable",onClick:function(){return t("tweets")}},"Tweets (".concat(a.tweet_count,")")),r.a.createElement("li",{id:"profile-followers",className:"clickable",onClick:function(){return t("followers")}},"Followers (".concat(a.follower_count,")")),r.a.createElement("li",{id:"profile-following",className:"clickable",onClick:function(){return t("following")}},"Following (".concat(a.following_count,")")))))},x=function(e){return r.a.createElement("div",{className:"scroller"},e.children)},k=function(e){var t=e.profileUsername,a=e.requestUserId,n=Object(m.b)(["userTweetList","accounts/".concat(t,"/tweets/")],f),c=n.data,s=n.status,l=n.refetch;return"loading"===s?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading")):"error"===s?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===s?"not found"===c.error_message?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found")):r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"".concat(t,"'s Tweets")),r.a.createElement(g,{tweetList:c,refetch:l,requestUserId:a})):void 0},y=function(e){var t=e.profile,a=e.requestUserId,n=e.refetch,c=e.userProfileRefetch,s=Object(m.a)(p,{onSuccess:function(){n(),c()}}),l=Object(u.a)(s,1)[0],d=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="accounts/".concat(t,"/follow/"),e.next=3,l({endpoint:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f="bg-btn-follow",E="Follow";t.user.id===parseInt(a,10)?f="d-none":t.followers.includes(parseInt(a,10))&&(f="bg-btn-unfollow",E="Unfollow");return r.a.createElement("div",{className:"profile-card card card-custom"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-info"},r.a.createElement("div",null,r.a.createElement("h6",{className:"profile-card-fullname"},"".concat(t.user.first_name," ").concat(t.user.last_name)),r.a.createElement("div",{className:""},r.a.createElement("span",{className:"user-link",onClick:function(){return e=t.user.username,void(window.location.href="/".concat(e));var e}},"@".concat(t.user.username)))),r.a.createElement("div",null,r.a.createElement("button",{className:"".concat(f," btn-custom"),onClick:function(){return d(t.user.username)}},"".concat(E)))),r.a.createElement("div",{className:"profile-bio"},"".concat(t.bio))))},j=function(e){var t=e.userProfileList,a=e.requestUserId,n=e.refetch,c=e.userProfileRefetch,s=t.map((function(e){return r.a.createElement(y,{key:e.id,profile:e,requestUserId:a,refetch:n,userProfileRefetch:c})}));return r.a.createElement(r.a.Fragment,null,s)},O=function(e){var t=e.profileUsername,a=e.requestUserId,n=e.userProfileRefetch,c=Object(m.b)(["followerList","accounts/".concat(t,"/followers/")],f),s=c.data,l=c.status,o=c.refetch;return"loading"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading")):"error"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===l?"not found"===s.error_message?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found")):r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"".concat(t,"'s Followers")),r.a.createElement(j,{userProfileList:s,requestUserId:a,refetch:o,userProfileRefetch:n})):void 0},I=function(e){var t=e.profileUsername,a=e.requestUserId,n=e.userProfileRefetch,c=Object(m.b)(["followingList","accounts/".concat(t,"/following/")],f),s=c.data,l=c.status,o=c.refetch;return"loading"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading")):"error"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===l?r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"".concat(t,"'s Following")),r.a.createElement(j,{userProfileList:s,requestUserId:a,refetch:o,userProfileRefetch:n})):void 0},U=a(5),L=a(7),_=function(e){var t=e.message,a="",n="";"success"===e.status&&(a="bg-custom-success",n="text-custom-success");return r.a.createElement("div",{id:"popup-message",className:"alert col-12 ".concat(a),style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("span",{className:"".concat(n)},t)),r.a.createElement("button",{type:"button",className:"close",onClick:function(){document.getElementById("popup-message").classList.add("d-none")}},r.a.createElement("span",{className:"".concat(n)},"\xd7")))},C=function(e){var t=e.profileUsername,a=(e.requestUserId,e.userProfileRefetch),c=Object(n.useState)({bio:"",first_name:"",last_name:""}),s=Object(u.a)(c,2),l=s[0],o=s[1],i=Object(m.b)(["userProfile","accounts/".concat(t,"/update/")],f),d=i.data,p=i.status,E=Object(m.a)(v,{onSuccess:function(e){a()}}),h=Object(u.a)(E,2),b=h[0],g=h[1],N=g.status,w=g.data;Object(n.useEffect)((function(){"success"===p&&o({bio:d.bio,first_name:d.user.first_name,last_name:d.user.last_name})}),[d,p]);var x=function(e){e.preventDefault(),o(Object(L.a)(Object(L.a)({},l),{},Object(U.a)({},e.target.name,e.target.value)))};return"loading"===p?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading...")):"error"===p?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===p?"not found"===d.error_message?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found")):r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"Update Profile"),r.a.createElement("div",{className:"card-custom form-custom profile-update"},"success"===N&&r.a.createElement(_,{message:w.success_message,status:"success"}),r.a.createElement("form",{method:"post",onSubmit:function(e){e.preventDefault();var a="accounts/".concat(t,"/update/"),n=l;try{b({endpoint:a,payload:n})}catch(r){console.log(r)}}},r.a.createElement("div",{className:"form-group-custom"},r.a.createElement("input",{maxLength:128,name:"bio",type:"text",placeholder:" ",value:l.bio,onChange:x}),r.a.createElement("label",{className:"label-custom"},r.a.createElement("span",{className:"label-text-custom"},"Bio"))),r.a.createElement("div",{className:"form-group-custom"},r.a.createElement("input",{name:"first_name",type:"text",placeholder:" ",value:l.first_name,onChange:x}),r.a.createElement("label",{className:"label-custom"},r.a.createElement("span",{className:"label-text-custom"},"First Name"))),r.a.createElement("div",{className:"form-group-custom"},r.a.createElement("input",{name:"last_name",type:"text",placeholder:" ",value:l.last_name,onChange:x}),r.a.createElement("label",{className:"label-custom"},r.a.createElement("span",{className:"label-text-custom"},"Last Name"))),r.a.createElement("div",{className:"mt-3"},r.a.createElement("input",{type:"submit",value:"Save Changes",className:"btn-custom"}))))):void 0},P=document.getElementById("tweet-list");if(P){var q=r.a.createElement((function(e){var t=e.requestUserId,a=Object(m.b)(["tweetListState","tweets/"],f),n=a.data,c=a.status,s=a.refetch,l=Object(m.a)(E,{onSuccess:s}),d=Object(u.a)(l,1)[0],p=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"tweets/create/",a={content:t},e.prev=2,e.next=5,d({endpoint:"tweets/create/",payload:a});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("tweet create error");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return"loading"===c?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading")):"error"===c?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===c?"not found"===n.error_message?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found")):r.a.createElement("div",{className:"col-10 col-md-8 col-lg-6 mx-auto"},r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(h,{handleTweetCreate:p})),r.a.createElement(r.a.Fragment,null,r.a.createElement(g,Object.assign({tweetList:n,refetch:s},e)))):void 0}),P.dataset);s.a.render(q,P)}var S=document.getElementById("tweet-detail");if(S){var T=r.a.createElement((function(e){return r.a.createElement("div",{className:"col-10 col-md-8 col-lg-6 mx-auto"},r.a.createElement(N,e))}),S.dataset);s.a.render(T,S)}var F=document.getElementById("user-profile");if(F){var R=r.a.createElement((function(e){var t=e.profileUsername,a=e.requestUserId,c=Object(m.b)(["userDetailState","accounts/".concat(t,"/")],f),s=c.data,l=c.status,o=c.refetch,i=Object(n.useState)("tweets"),d=Object(u.a)(i,2),p=d[0],E=d[1];return"loading"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Loading")):"error"===l?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error. Try Again")):"success"===l?"not found"===s.error_message?r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",null,"Error 404 : Not Found")):r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"profile-toggle-button",onClick:function(){document.getElementById("profile-component").classList.toggle("fixed-div-none")}},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-user"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"profile-component",className:"fixed-div fixed-div-none"},r.a.createElement(x,null,r.a.createElement(w,{userProfile:s,handleProfileSidebarLink:function(e){E(e),document.querySelectorAll(".profile-links ul li").forEach((function(e){e.classList.remove("active")})),document.getElementById("profile-".concat(e)).classList.toggle("active")},requestUserId:a,userProfileRefetch:o}))),r.a.createElement("div",{className:"profile-content-div mt-3"},r.a.createElement("div",{className:"profile-content"},"update"===p&&s.id===parseInt(a,10)&&r.a.createElement(C,{profileUsername:t,requestUserId:a,userProfileRefetch:o}),"tweets"===p&&r.a.createElement(k,{profileUsername:t,requestUserId:a}),"followers"===p&&r.a.createElement(O,{profileUsername:t,requestUserId:a,userProfileRefetch:o}),"following"===p&&r.a.createElement(I,{profileUsername:t,requestUserId:a,userProfileRefetch:o}))))):void 0}),F.dataset);s.a.render(R,F)}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.8126a490.chunk.js.map